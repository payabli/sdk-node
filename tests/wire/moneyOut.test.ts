/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool.js";
import { PayabliClient } from "../../src/Client";

describe("MoneyOut", () => {
    test("AuthorizeOut", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            entryPoint: "48acde49",
            invoiceData: [{ billId: 54323 }],
            orderDescription: "Window Painting",
            paymentDetails: { totalAmount: 47, unbundled: false },
            paymentMethod: { method: "managed" },
            vendorData: { vendorNumber: "7895433" },
        };
        const rawResponseBody = {
            responseCode: 1,
            pageIdentifier: null,
            roomId: 0,
            isSuccess: true,
            responseText: "Success",
            responseData: {
                authCode: null,
                referenceId: "129-219",
                resultCode: 1,
                resultText: "Authorized",
                avsResponseText: null,
                cvvResponseText: null,
                customerId: 0,
                methodReferenceId: null,
            },
        };
        server
            .mockEndpoint()
            .post("/MoneyOut/authorize")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.authorizeOut({
            body: {
                entryPoint: "48acde49",
                invoiceData: [
                    {
                        billId: 54323,
                    },
                ],
                orderDescription: "Window Painting",
                paymentDetails: {
                    totalAmount: 47,
                    unbundled: false,
                },
                paymentMethod: {
                    method: "managed",
                },
                vendorData: {
                    vendorNumber: "7895433",
                },
            },
        });
        expect(response).toEqual({
            responseCode: 1,
            pageIdentifier: null,
            roomId: 0,
            isSuccess: true,
            responseText: "Success",
            responseData: {
                authCode: null,
                referenceId: "129-219",
                resultCode: 1,
                resultText: "Authorized",
                avsResponseText: null,
                cvvResponseText: null,
                customerId: 0,
                methodReferenceId: null,
            },
        });
    });

    test("CancelAllOut", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = ["2-29", "2-28", "2-27"];
        const rawResponseBody = {
            isSuccess: true,
            pageIdentifier: "null",
            responseCode: 1,
            responseData: [
                { CustomerId: 1000000, ReferenceId: "129-230", ResultCode: 1, ResultText: "Cancelled" },
                { CustomerId: 1000000, ReferenceId: "129-219", ResultCode: 1, ResultText: "Cancelled" },
            ],
            responseText: "Success",
        };
        server
            .mockEndpoint()
            .post("/MoneyOut/cancelAll")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.cancelAllOut(["2-29", "2-28", "2-27"]);
        expect(response).toEqual({
            isSuccess: true,
            pageIdentifier: "null",
            responseCode: 1,
            responseData: [
                {
                    CustomerId: 1000000,
                    ReferenceId: "129-230",
                    ResultCode: 1,
                    ResultText: "Cancelled",
                },
                {
                    CustomerId: 1000000,
                    ReferenceId: "129-219",
                    ResultCode: 1,
                    ResultText: "Cancelled",
                },
            ],
            responseText: "Success",
        });
    });

    test("CancelOutGet", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            isSuccess: true,
            responseText: "Success",
            pageIdentifier: undefined,
            responseData: {
                ReferenceId: "129-219",
                ResultCode: 1,
                ResultText: "Approved",
                CustomerId: 0,
                AuthCode: undefined,
                cvvResponseText: undefined,
                avsResponseText: undefined,
                methodReferenceId: undefined,
            },
        };
        server
            .mockEndpoint()
            .get("/MoneyOut/cancel/129-219")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.cancelOutGet("129-219");
        expect(response).toEqual({
            isSuccess: true,
            responseText: "Success",
            pageIdentifier: undefined,
            responseData: {
                ReferenceId: "129-219",
                ResultCode: 1,
                ResultText: "Approved",
                CustomerId: 0,
                AuthCode: undefined,
                cvvResponseText: undefined,
                avsResponseText: undefined,
                methodReferenceId: undefined,
            },
        });
    });

    test("CancelOutDelete", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            isSuccess: true,
            responseText: "Success",
            pageIdentifier: undefined,
            responseData: {
                ReferenceId: "129-219",
                ResultCode: 1,
                ResultText: "Approved",
                CustomerId: 0,
                AuthCode: undefined,
                cvvResponseText: undefined,
                avsResponseText: undefined,
                methodReferenceId: undefined,
            },
        };
        server
            .mockEndpoint()
            .delete("/MoneyOut/cancel/129-219")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.cancelOutDelete("129-219");
        expect(response).toEqual({
            isSuccess: true,
            responseText: "Success",
            pageIdentifier: undefined,
            responseData: {
                ReferenceId: "129-219",
                ResultCode: 1,
                ResultText: "Approved",
                CustomerId: 0,
                AuthCode: undefined,
                cvvResponseText: undefined,
                avsResponseText: undefined,
                methodReferenceId: undefined,
            },
        });
    });

    test("CaptureAllOut", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = ["2-29", "2-28", "2-27"];
        const rawResponseBody = {
            isSuccess: true,
            pageIdentifier: "null",
            responseCode: 1,
            responseData: [
                { CustomerId: 1000000, ReferenceId: "129-230", ResultCode: 1, ResultText: "Captured" },
                { CustomerId: 1000000, ReferenceId: "129-219", ResultCode: 1, ResultText: "Captured" },
            ],
            responseText: "Success",
        };
        server
            .mockEndpoint()
            .post("/MoneyOut/captureAll")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.captureAllOut({
            body: ["2-29", "2-28", "2-27"],
        });
        expect(response).toEqual({
            isSuccess: true,
            pageIdentifier: "null",
            responseCode: 1,
            responseData: [
                {
                    CustomerId: 1000000,
                    ReferenceId: "129-230",
                    ResultCode: 1,
                    ResultText: "Captured",
                },
                {
                    CustomerId: 1000000,
                    ReferenceId: "129-219",
                    ResultCode: 1,
                    ResultText: "Captured",
                },
            ],
            responseText: "Success",
        });
    });

    test("CaptureOut", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            responseCode: 1,
            pageIdentifier: null,
            roomId: 0,
            isSuccess: true,
            responseText: "Success",
            responseData: {
                authCode: null,
                referenceId: "129-219",
                resultCode: 1,
                resultText: "Authorized",
                avsResponseText: null,
                cvvResponseText: null,
                customerId: 0,
                methodReferenceId: null,
            },
        };
        server
            .mockEndpoint()
            .get("/MoneyOut/capture/129-219")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.captureOut("129-219");
        expect(response).toEqual({
            responseCode: 1,
            pageIdentifier: null,
            roomId: 0,
            isSuccess: true,
            responseText: "Success",
            responseData: {
                authCode: null,
                referenceId: "129-219",
                resultCode: 1,
                resultText: "Authorized",
                avsResponseText: null,
                cvvResponseText: null,
                customerId: 0,
                methodReferenceId: null,
            },
        });
    });

    test("PayoutDetails", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            Bills: [{ invoiceNumber: "123B", netAmount: "8800.00" }],
            CheckData: undefined,
            CheckNumber: undefined,
            Comments: "testing",
            CreatedDate: "2022-07-01T15:00:01Z",
            Events: [{ EventTime: "2023-04-24T09:17:49Z", TransEvent: "Authorized" }],
            FeeAmount: 0,
            Gateway: "TSYS",
            IdOut: 350,
            LastUpdated: "2023-04-23T17:00:00Z",
            NetAmount: 8800,
            ParentOrgName: "PropertyManager Pro",
            PaymentData: {
                AccountType: "",
                binData: {
                    binMatchedLength: "6",
                    binCardBrand: "Visa",
                    binCardType: "Credit",
                    binCardCategory: "PLATINUM",
                    binCardIssuer: "Bank of Example",
                    binCardIssuerCountry: "United States",
                    binCardIssuerCountryCodeA2: "US",
                    binCardIssuerCountryNumber: "840",
                    binCardIsRegulated: "false",
                    binCardUseCategory: "Consumer",
                    binCardIssuerCountryCodeA3: "USA",
                },
                HolderName: "",
                Initiator: "payor",
                MaskedAccount: "",
                Sequence: "subsequent",
                SignatureData: "SignatureData",
                StoredMethodUsageType: "subscription",
            },
            PaymentGroup: "2345667-ddd-fff",
            PaymentId: "12345678910",
            PaymentMethod: "managed",
            PaymentStatus: "Authorized",
            PaypointDbaname: "Sunshine Gutters",
            PaypointLegalname: "Sunshine Services, LLC",
            Source: "api",
            Status: 11,
            StatusText: "Captured",
            TotalAmount: 8800,
            Vendor: {
                VendorNumber: "1234",
                Name1: "Herman's Coatings",
                Name2: "Herman's Coating Supply Company, LLC",
                EIN: "123456789",
                Phone: "212-555-1234",
                Email: "example@email.com",
                RemitEmail: undefined,
                Address1: "123 Ocean Drive",
                Address2: "Suite 400",
                City: "Bristol",
                State: "GA",
                Zip: "31113",
                Country: "US",
                Mcc: "7777",
                LocationCode: "LOC123",
                Contacts: {
                    ContactEmail: "eric@martinezcoatings.com",
                    ContactName: "Eric Martinez",
                    ContactPhone: "5555555555",
                    ContactTitle: "Owner",
                },
                BillingData: {
                    id: 123456,
                    accountId: "bank-account-001",
                    nickname: "Main Checking Account",
                    bankName: "Example Bank",
                    routingAccount: "123456789",
                    accountNumber: "9876543210",
                    typeAccount: "Checking",
                    bankAccountHolderName: "John Doe",
                    bankAccountHolderType: "Business",
                    bankAccountFunction: 2,
                    verified: true,
                    status: 1,
                    services: [],
                    default: true,
                },
                PaymentMethod: undefined,
                VendorStatus: 1,
                VendorId: 1,
                EnrollmentStatus: undefined,
                Summary: {
                    ActiveBills: 2,
                    PendingBills: 4,
                    InTransitBills: 3,
                    PaidBills: 18,
                    OverdueBills: 1,
                    ApprovedBills: 5,
                    DisapprovedBills: 1,
                    TotalBills: 34,
                    ActiveBillsAmount: 1250.75,
                    PendingBillsAmount: 2890.5,
                    InTransitBillsAmount: 1675.25,
                    PaidBillsAmount: 15420.8,
                    OverdueBillsAmount: 425,
                    ApprovedBillsAmount: 3240.9,
                    DisapprovedBillsAmount: 180,
                    TotalBillsAmount: 25083.2,
                },
                PaypointLegalname: "Sunshine Services, LLC",
                PaypointDbaname: "Sunshine Gutters",
                PaypointEntryname: "d193cf9a46",
                ParentOrgName: "PropertyManager Pro",
                ParentOrgId: 1000,
                CreatedDate: "2022-07-01T15:00:01Z",
                LastUpdated: "2022-07-01T15:00:01Z",
                remitAddress1: "123 Walnut Street",
                remitAddress2: "Suite 900",
                remitCity: "Miami",
                remitState: "FL",
                remitZip: "31113",
                remitCountry: "US",
                payeeName1: "payeeName1",
                payeeName2: "payeeName2",
                customField1: "",
                customField2: "",
                customerVendorAccount: "123-456",
                InternalReferenceId: 1000000,
                additionalData: undefined,
                externalPaypointID: "Paypoint-100",
                StoredMethods: [],
            },
            CreatedAt: undefined,
            ParentOrgId: undefined,
            externalPaypointID: undefined,
            EntryName: undefined,
            BatchId: undefined,
            HasVcardTransactions: false,
            IsSameDayACH: false,
            ScheduleId: undefined,
            SettlementStatus: undefined,
            RiskFlagged: false,
            RiskFlaggedOn: undefined,
            RiskStatus: undefined,
            RiskReason: undefined,
            RiskAction: undefined,
            RiskActionCode: undefined,
        };
        server
            .mockEndpoint()
            .get("/MoneyOut/details/45-as456777hhhhhhhhhh77777777-324")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.payoutDetails("45-as456777hhhhhhhhhh77777777-324");
        expect(response).toEqual({
            Bills: [
                {
                    invoiceNumber: "123B",
                    netAmount: "8800.00",
                },
            ],
            CheckData: undefined,
            CheckNumber: undefined,
            Comments: "testing",
            CreatedDate: "2022-07-01T15:00:01Z",
            Events: [
                {
                    EventTime: "2023-04-24T09:17:49Z",
                    TransEvent: "Authorized",
                },
            ],
            FeeAmount: 0,
            Gateway: "TSYS",
            IdOut: 350,
            LastUpdated: "2023-04-23T17:00:00Z",
            NetAmount: 8800,
            ParentOrgName: "PropertyManager Pro",
            PaymentData: {
                AccountType: "",
                binData: {
                    binMatchedLength: "6",
                    binCardBrand: "Visa",
                    binCardType: "Credit",
                    binCardCategory: "PLATINUM",
                    binCardIssuer: "Bank of Example",
                    binCardIssuerCountry: "United States",
                    binCardIssuerCountryCodeA2: "US",
                    binCardIssuerCountryNumber: "840",
                    binCardIsRegulated: "false",
                    binCardUseCategory: "Consumer",
                    binCardIssuerCountryCodeA3: "USA",
                },
                HolderName: "",
                Initiator: "payor",
                MaskedAccount: "",
                Sequence: "subsequent",
                SignatureData: "SignatureData",
                StoredMethodUsageType: "subscription",
            },
            PaymentGroup: "2345667-ddd-fff",
            PaymentId: "12345678910",
            PaymentMethod: "managed",
            PaymentStatus: "Authorized",
            PaypointDbaname: "Sunshine Gutters",
            PaypointLegalname: "Sunshine Services, LLC",
            Source: "api",
            Status: 11,
            StatusText: "Captured",
            TotalAmount: 8800,
            Vendor: {
                VendorNumber: "1234",
                Name1: "Herman's Coatings",
                Name2: "Herman's Coating Supply Company, LLC",
                EIN: "123456789",
                Phone: "212-555-1234",
                Email: "example@email.com",
                RemitEmail: undefined,
                Address1: "123 Ocean Drive",
                Address2: "Suite 400",
                City: "Bristol",
                State: "GA",
                Zip: "31113",
                Country: "US",
                Mcc: "7777",
                LocationCode: "LOC123",
                Contacts: {
                    ContactEmail: "eric@martinezcoatings.com",
                    ContactName: "Eric Martinez",
                    ContactPhone: "5555555555",
                    ContactTitle: "Owner",
                },
                BillingData: {
                    id: 123456,
                    accountId: "bank-account-001",
                    nickname: "Main Checking Account",
                    bankName: "Example Bank",
                    routingAccount: "123456789",
                    accountNumber: "9876543210",
                    typeAccount: "Checking",
                    bankAccountHolderName: "John Doe",
                    bankAccountHolderType: "Business",
                    bankAccountFunction: 2,
                    verified: true,
                    status: 1,
                    services: [],
                    default: true,
                },
                PaymentMethod: undefined,
                VendorStatus: 1,
                VendorId: 1,
                EnrollmentStatus: undefined,
                Summary: {
                    ActiveBills: 2,
                    PendingBills: 4,
                    InTransitBills: 3,
                    PaidBills: 18,
                    OverdueBills: 1,
                    ApprovedBills: 5,
                    DisapprovedBills: 1,
                    TotalBills: 34,
                    ActiveBillsAmount: 1250.75,
                    PendingBillsAmount: 2890.5,
                    InTransitBillsAmount: 1675.25,
                    PaidBillsAmount: 15420.8,
                    OverdueBillsAmount: 425,
                    ApprovedBillsAmount: 3240.9,
                    DisapprovedBillsAmount: 180,
                    TotalBillsAmount: 25083.2,
                },
                PaypointLegalname: "Sunshine Services, LLC",
                PaypointDbaname: "Sunshine Gutters",
                PaypointEntryname: "d193cf9a46",
                ParentOrgName: "PropertyManager Pro",
                ParentOrgId: 1000,
                CreatedDate: "2022-07-01T15:00:01Z",
                LastUpdated: "2022-07-01T15:00:01Z",
                remitAddress1: "123 Walnut Street",
                remitAddress2: "Suite 900",
                remitCity: "Miami",
                remitState: "FL",
                remitZip: "31113",
                remitCountry: "US",
                payeeName1: "payeeName1",
                payeeName2: "payeeName2",
                customField1: "",
                customField2: "",
                customerVendorAccount: "123-456",
                InternalReferenceId: 1000000,
                additionalData: undefined,
                externalPaypointID: "Paypoint-100",
                StoredMethods: [],
            },
            CreatedAt: undefined,
            ParentOrgId: undefined,
            externalPaypointID: undefined,
            EntryName: undefined,
            BatchId: undefined,
            HasVcardTransactions: false,
            IsSameDayACH: false,
            ScheduleId: undefined,
            SettlementStatus: undefined,
            RiskFlagged: false,
            RiskFlaggedOn: undefined,
            RiskStatus: undefined,
            RiskReason: undefined,
            RiskAction: undefined,
            RiskActionCode: undefined,
        });
    });

    test("VCardGet", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            vcardSent: false,
            cardToken: "20231206142225226104",
            cardNumber: "553232XXXXXX3179",
            cvc: "XXX",
            expirationDate: "2025-05-01",
            status: undefined,
            amount: 120,
            currentBalance: 120,
            expenseLimit: 20,
            expenseLimitPeriod: undefined,
            maxNumberOfUses: 1,
            currentNumberOfUses: 0,
            exactAmount: true,
            mcc: undefined,
            tcc: undefined,
            misc1: undefined,
            misc2: undefined,
            dateCreated: "2023-12-06T20:25:31.077",
            dateModified: "2023-12-06T00:00:00",
            associatedVendor: {
                VendorNumber: "VENDOR123456",
                Name1: "Smith Industries",
                Name2: "John Smith",
                EIN: "12-3456789",
                Phone: "555-123-4567",
                Email: "contact@smithindustries.com",
                RemitEmail: undefined,
                Address1: "1234 Main Street",
                Address2: "Suite 200",
                City: "New York",
                State: "NY",
                Zip: "10001",
                Country: "USA",
                Mcc: "5411",
                LocationCode: undefined,
                Contacts: [
                    {
                        ContactName: "Herman Martinez",
                        ContactEmail: "herman@hermanscoatings.com",
                        ContactTitle: "Owner",
                        ContactPhone: "3055550000",
                    },
                ],
                BillingData: {
                    id: 123,
                    accountId: undefined,
                    nickname: "Checking Account",
                    bankName: "Chase Bank",
                    routingAccount: "021000021",
                    accountNumber: "3XXXXXX8888",
                    typeAccount: "Checking",
                    bankAccountHolderName: "Gruzya Adventure Outfitters LLC",
                    bankAccountHolderType: "Business",
                    bankAccountFunction: 0,
                    verified: true,
                    status: 1,
                    services: [],
                    default: true,
                },
                PaymentMethod: "vcard",
                VendorStatus: 1,
                VendorId: 339,
                EnrollmentStatus: undefined,
                Summary: {
                    ActiveBills: 1,
                    ActiveBillsAmount: 1.1,
                    ApprovedBills: 1,
                    ApprovedBillsAmount: 1.1,
                    DisapprovedBills: 1,
                    DisapprovedBillsAmount: 1.1,
                    InTransitBills: 0,
                    InTransitBillsAmount: 0,
                    OverdueBills: 1,
                    OverdueBillsAmount: 100,
                    PaidBills: 0,
                    PaidBillsAmount: 0,
                    PendingBills: 1,
                    PendingBillsAmount: 100,
                    TotalBills: 1,
                    TotalBillsAmount: 100,
                },
                PaypointLegalname: "Athlete Factory LLC",
                PaypointDbaname: "Athlete Factory LLC",
                PaypointEntryname: "PaypointEntryname",
                ParentOrgName: "HOA Manager Pro",
                ParentOrgId: 1232,
                CreatedDate: "2022-07-01T15:00:01Z",
                LastUpdated: "2022-07-01T15:00:01Z",
                remitAddress1: "123 Walnut Street",
                remitAddress2: "Suite 900",
                remitCity: "Miami",
                remitState: "FL",
                remitZip: "31113",
                remitCountry: "US",
                payeeName1: undefined,
                payeeName2: undefined,
                customField1: "customField1",
                customField2: "customField2",
                customerVendorAccount: undefined,
                InternalReferenceId: 27,
                additionalData: undefined,
                externalPaypointID: undefined,
                StoredMethods: undefined,
            },
            associatedCustomer: undefined,
            ParentOrgName: "HOA Manager Pro",
            PaypointDbaname: "Athlete Factory LLC",
            PaypointLegalname: "Athlete Factory LLC",
            PaypointEntryname: "47acde49",
            externalPaypointID: undefined,
            paypointId: 12345,
        };
        server
            .mockEndpoint()
            .get("/MoneyOut/vcard/20230403315245421165")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.vCardGet("20230403315245421165");
        expect(response).toEqual({
            vcardSent: false,
            cardToken: "20231206142225226104",
            cardNumber: "553232XXXXXX3179",
            cvc: "XXX",
            expirationDate: "2025-05-01",
            status: undefined,
            amount: 120,
            currentBalance: 120,
            expenseLimit: 20,
            expenseLimitPeriod: undefined,
            maxNumberOfUses: 1,
            currentNumberOfUses: 0,
            exactAmount: true,
            mcc: undefined,
            tcc: undefined,
            misc1: undefined,
            misc2: undefined,
            dateCreated: "2023-12-06T20:25:31.077",
            dateModified: "2023-12-06T00:00:00",
            associatedVendor: {
                VendorNumber: "VENDOR123456",
                Name1: "Smith Industries",
                Name2: "John Smith",
                EIN: "12-3456789",
                Phone: "555-123-4567",
                Email: "contact@smithindustries.com",
                RemitEmail: undefined,
                Address1: "1234 Main Street",
                Address2: "Suite 200",
                City: "New York",
                State: "NY",
                Zip: "10001",
                Country: "USA",
                Mcc: "5411",
                LocationCode: undefined,
                Contacts: [
                    {
                        ContactName: "Herman Martinez",
                        ContactEmail: "herman@hermanscoatings.com",
                        ContactTitle: "Owner",
                        ContactPhone: "3055550000",
                    },
                ],
                BillingData: {
                    id: 123,
                    accountId: undefined,
                    nickname: "Checking Account",
                    bankName: "Chase Bank",
                    routingAccount: "021000021",
                    accountNumber: "3XXXXXX8888",
                    typeAccount: "Checking",
                    bankAccountHolderName: "Gruzya Adventure Outfitters LLC",
                    bankAccountHolderType: "Business",
                    bankAccountFunction: 0,
                    verified: true,
                    status: 1,
                    services: [],
                    default: true,
                },
                PaymentMethod: "vcard",
                VendorStatus: 1,
                VendorId: 339,
                EnrollmentStatus: undefined,
                Summary: {
                    ActiveBills: 1,
                    ActiveBillsAmount: 1.1,
                    ApprovedBills: 1,
                    ApprovedBillsAmount: 1.1,
                    DisapprovedBills: 1,
                    DisapprovedBillsAmount: 1.1,
                    InTransitBills: 0,
                    InTransitBillsAmount: 0,
                    OverdueBills: 1,
                    OverdueBillsAmount: 100,
                    PaidBills: 0,
                    PaidBillsAmount: 0,
                    PendingBills: 1,
                    PendingBillsAmount: 100,
                    TotalBills: 1,
                    TotalBillsAmount: 100,
                },
                PaypointLegalname: "Athlete Factory LLC",
                PaypointDbaname: "Athlete Factory LLC",
                PaypointEntryname: "PaypointEntryname",
                ParentOrgName: "HOA Manager Pro",
                ParentOrgId: 1232,
                CreatedDate: "2022-07-01T15:00:01Z",
                LastUpdated: "2022-07-01T15:00:01Z",
                remitAddress1: "123 Walnut Street",
                remitAddress2: "Suite 900",
                remitCity: "Miami",
                remitState: "FL",
                remitZip: "31113",
                remitCountry: "US",
                payeeName1: undefined,
                payeeName2: undefined,
                customField1: "customField1",
                customField2: "customField2",
                customerVendorAccount: undefined,
                InternalReferenceId: 27,
                additionalData: undefined,
                externalPaypointID: undefined,
                StoredMethods: undefined,
            },
            associatedCustomer: undefined,
            ParentOrgName: "HOA Manager Pro",
            PaypointDbaname: "Athlete Factory LLC",
            PaypointLegalname: "Athlete Factory LLC",
            PaypointEntryname: "47acde49",
            externalPaypointID: undefined,
            paypointId: 12345,
        });
    });

    test("SendVCardLink", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { transId: "01K33Z6YQZ6GD5QVKZ856MJBSC" };
        const rawResponseBody = { message: "Successfully sent email to: vendor@vendor.com", success: true };
        server
            .mockEndpoint()
            .post("/vcard/send-card-link")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.sendVCardLink({
            transId: "01K33Z6YQZ6GD5QVKZ856MJBSC",
        });
        expect(response).toEqual({
            message: "Successfully sent email to: vendor@vendor.com",
            success: true,
        });
    });

    test("GetCheckImage", async () => {
        const server = mockServerPool.createServer();
        const client = new PayabliClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody =
            '%PDF-1.7\n%����\n123 0 obj\n<</Linearized 1/L 123456/O 125/E 78901/N 1/T 123450/H [ 800 200]>>\nendobj\n\n124 0 obj\n<</DecodeParms<</Columns 4/Predictor 12>>/Filter/FlateDecode/ID[<AB123C4567EF890123456789ABCDEF01><12345678ABCDEF9876543210FEDCBA98>]/Index[123 100]/Info 122 0 R/Length 128/Prev 123450/Root 125 0 R/Size 223/Type/XRef/W[1 3 1]>>stream\nh�bbd```b``�\n"x�a7�r�H~�����A�D���2����m�f��L`v6�H����D���J[@����H8�I��)0��q� XD��`��a���P�`�`��"�A$������r���p�$�Ip������a� �';
        server
            .mockEndpoint()
            .get("/MoneyOut/checkimage/check133832686289732320_01JKBNZ5P32JPTZY8XXXX000000.pdf")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.moneyOut.getCheckImage("check133832686289732320_01JKBNZ5P32JPTZY8XXXX000000.pdf");
        expect(response).toEqual(
            '%PDF-1.7\n%\uFFFD\uFFFD\uFFFD\uFFFD\n123 0 obj\n<</Linearized 1/L 123456/O 125/E 78901/N 1/T 123450/H [ 800 200]>>\nendobj\n\n124 0 obj\n<</DecodeParms<</Columns 4/Predictor 12>>/Filter/FlateDecode/ID[<AB123C4567EF890123456789ABCDEF01><12345678ABCDEF9876543210FEDCBA98>]/Index[123 100]/Info 122 0 R/Length 128/Prev 123450/Root 125 0 R/Size 223/Type/XRef/W[1 3 1]>>stream\nh\uFFFDbbd```b``\uFFFD\n"x\uFFFDa7\uFFFDr\uFFFDH~\uFFFD\uFFFD\uFFFD\uFFFD\uFFFDA\uFFFDD\uFFFD\uFFFD\uFFFD2\uFFFD\uFFFD\uFFFD\uFFFDm\uFFFDf\uFFFD\uFFFDL`v6\uFFFDH\uFFFD\uFFFD\uFFFD\uFFFDD\uFFFD\uFFFD\uFFFDJ[@\uFFFD\uFFFD\uFFFD\uFFFDH8\uFFFDI\uFFFD\uFFFD)0\uFFFD\uFFFDq\uFFFD XD\uFFFD\uFFFD`\uFFFD\uFFFDa\uFFFD\uFFFD\uFFFDP\uFFFD`\uFFFD`\uFFFD\uFFFD"\uFFFDA$\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFDr\uFFFD\uFFFD\uFFFDp\uFFFD$\uFFFDIp\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFDa\uFFFD \uFFFD',
        );
    });
});
